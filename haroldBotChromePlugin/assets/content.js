!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([,function(e,t,n){"use strict";var o=n(2);Vue.use(o),Vue.component("item",{template:"#item-tpl",props:["filename","index","add"]}),Vue.component("selectServerOption",{template:"#selectServerOption-tpl",props:["item"]});var r=new Vue({el:".mainWrapper",data:{UID:"not set",nowPlaying:"loading",onPause:!1,queue:[],playList:[],addCount:"",volume:10,playListSelectedCount:0,serverIp:"",selectedServerIp:"",onlineServers:[],port:2303},computed:{ip:{get:function(){return this.serverIp},set:function(e){this.serverIp!=e&&(chrome.storage.sync.set({serverIp:e}),this.serverIp=e)}},selectedServer:{get:function(){return this.selectedServerIp},set:function(e){this.selectedServerIp=e,this.ip=e,this.refreshAll()}}},methods:{clearUID:function(e){chrome.storage.sync.set({userId:""})},pause:function(e){c.emit("pauseStateChange",{userId:u,newState:!0}),console.log("paused",this)},resume:function(e){c.emit("pauseStateChange",{userId:u,newState:!1}),console.log("resumed")},skip:function(e){c.emit("skip",{userId:u})},add:function(e){c.emit("add",{userId:u,count:+this.addCount}),r.addCount=""},stop:function(){c.emit("stop",{userId:u})},defaultVolume:function(){this.volume=10,s.slider("value",10),c.emit("volumeChanged",{userId:u,newValue:10})},clearQueue:function(){c.emit("clearQueue",{userId:u})},removeFromQueue:function(e){c.emit("removeFromQueue",{userId:u,index:e})},removeFromPlayList:function(e){c.emit("removeFromPlayList",{userId:u,index:e})},addToQueueFromPlaylist:function(e){c.emit("addFromPlayListInQueue",{userId:u,index:e})},unselectSelected:function(e){$(".selectable .ui-selected").removeClass("ui-selected"),this.playListSelectedCount=0,this.playList.map(function(e){return e.selected=!1})},addSelectedFromPlaylistInQueue:function(){var e=r.playList.map(function(e,t){if(e.selected)return t}).filter(function(e){return"number"==typeof e});e.length>2&&0==e[0]&&e.splice(0,1),c.emit("addSelectedFromPlaylistInQueue",{userId:u,ids:e})},removeSelectedFromPlayList:function(){var e=r.playList.map(function(e,t){if(e.selected)return t}).filter(function(e){return"number"==typeof e});e.length>2&&0==e[0]&&e.splice(0,1),c.emit("removeSelectedFromPlayList",{userId:u,ids:e})},refreshAll:function(){if(this.ip){var e="http://"+this.ip+":"+this.port+"/";c&&c.disconnect(),c=io(e),i(c),c.emit("getAll",{userId:r.UID})}}},created:function(){var e=this;chrome.storage.sync.get(["userId","serverIp"],function(t){e.UID=t.userId,e.ip=t.serverIp,u=t.userId,e.refreshAll()});var t=function(){e.$http.get("http://pew-pc.com/harold/index.php").then(function(t){e.onlineServers=t.body})};t(),setInterval(t,1e4)}}),i=function(e){e.on("all",function(e){var t=e.users.filter(function(e){return e.id==u})[0];r.nowPlaying=e.nowPlaying.fileName,r.onPause=e.onPause,r.volume=e.volume,s.slider("value",e.volume),t&&(r.playList=t.playList,r.queue=t.queue)}),e.on("queueChange",function(e){r.queue=e}),e.on("nowPlayingChange",function(e){r.nowPlaying=e.fileName}),e.on("playListChange",function(e){r.playList=e}),e.on("pauseStateChange",function(e){r.onPause=e}),e.on("getUID",function(t){e.emit("UID",u)}),e.on("volumeChange",function(e){s.slider("value",+e),r.volume=+e})};chrome.storage.onChanged.addListener(function(e,t){e.userId&&(r.UID=e.userId.newValue,u=e.userId.newValue)});var u,s,a,c;$(function(){s=$("#volumeSlider").slider({value:r.volume,min:0,max:100,step:1,slide:function(e,t){r.volume=t.value,a&&clearTimeout(a),a=setTimeout(function(){c.emit("volumeChanged",{userId:u,newValue:t.value})},100)}}),$(".selectable").selectable({selected:function(e,t){var n=r.playList[$(t.selected).index()];n.selected||(n.selected=!0,r.playListSelectedCount++)},unselected:function(e,t){var n=r.playList[$(t.selected).index()];n.selected&&(n.selected=!1,r.playListSelectedCount--)}})})},function(e,t,n){"use strict";function o(e){this.state=W,this.value=void 0,this.deferred=[];var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}function r(e,t){e instanceof Promise?this.promise=e:this.promise=new Promise(e.bind(t)),this.context=t}function i(e){"undefined"!=typeof console&&Z&&console.warn("[VueResource warn]: "+e)}function u(e){"undefined"!=typeof console&&console.error(e)}function s(e,t){return _(e,t)}function a(e){return e?e.replace(/^\s*|\s*$/g,""):""}function c(e,t){return e&&void 0===t?e.replace(/\s+$/,""):e&&t?e.replace(new RegExp("["+t+"]+$"),""):e}function f(e){return e?e.toLowerCase():""}function l(e){return e?e.toUpperCase():""}function p(e){return"string"==typeof e}function d(e){return"function"==typeof e}function h(e){return null!==e&&"object"==typeof e}function m(e){return h(e)&&Object.getPrototypeOf(e)==Object.prototype}function v(e){return"undefined"!=typeof Blob&&e instanceof Blob}function y(e){return"undefined"!=typeof FormData&&e instanceof FormData}function g(e,t,n){var o=r.resolve(e);return arguments.length<2?o:o.then(t,n)}function b(e,t,n){return n=n||{},d(n)&&(n=n.call(t)),x(e.bind({$vm:t,$options:n}),e,{$options:n})}function w(e,t){var n,o;if(ne(e))for(n=0;n<e.length;n++)t.call(e[n],e[n],n);else if(h(e))for(o in e)z.call(e,o)&&t.call(e[o],e[o],o);return e}function x(e){return Y.call(arguments,1).forEach(function(t){P(e,t,!0)}),e}function I(e){return Y.call(arguments,1).forEach(function(t){for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}function T(e){return Y.call(arguments,1).forEach(function(t){P(e,t)}),e}function P(e,t,n){for(var o in t)n&&(m(t[o])||ne(t[o]))?(m(t[o])&&!m(e[o])&&(e[o]={}),ne(t[o])&&!ne(e[o])&&(e[o]=[]),P(e[o],t[o],n)):void 0!==t[o]&&(e[o]=t[o])}function j(e,t,n){var o=C(e),r=o.expand(t);return n&&n.push.apply(n,o.vars),r}function C(e){var t=["+","#",".","/",";","?","&"],n=[];return{vars:n,expand:function(o){return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){var u=null,s=[];if(-1!==t.indexOf(r.charAt(0))&&(u=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(e){var t=/([^:\*]*)(?::(\d+)|(\*))?/.exec(e);s.push.apply(s,E(o,u,t[1],t[2]||t[3])),n.push(t[1])}),u&&"+"!==u){var a=",";return"?"===u?a="&":"#"!==u&&(a=u),(0!==s.length?u:"")+s.join(a)}return s.join(",")}return L(i)})}}}function E(e,t,n,o){var r=e[n],i=[];if(O(r)&&""!==r)if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)r=r.toString(),o&&"*"!==o&&(r=r.substring(0,parseInt(o,10))),i.push($(t,r,S(t)?n:null));else if("*"===o)Array.isArray(r)?r.filter(O).forEach(function(e){i.push($(t,e,S(t)?n:null))}):Object.keys(r).forEach(function(e){O(r[e])&&i.push($(t,r[e],e))});else{var u=[];Array.isArray(r)?r.filter(O).forEach(function(e){u.push($(t,e))}):Object.keys(r).forEach(function(e){O(r[e])&&(u.push(encodeURIComponent(e)),u.push($(t,r[e].toString())))}),S(t)?i.push(encodeURIComponent(n)+"="+u.join(",")):0!==u.length&&i.push(u.join(","))}else";"===t?i.push(encodeURIComponent(n)):""!==r||"&"!==t&&"?"!==t?""===r&&i.push(""):i.push(encodeURIComponent(n)+"=");return i}function O(e){return void 0!==e&&null!==e}function S(e){return";"===e||"&"===e||"?"===e}function $(e,t,n){return t="+"===e||"#"===e?L(t):encodeURIComponent(t),n?encodeURIComponent(n)+"="+t:t}function L(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e)),e}).join("")}function U(e,t){var n,o=this||{},r=e;return p(e)&&(r={url:e,params:t}),r=x({},U.options,o.$options,r),U.transforms.forEach(function(e){p(e)&&(e=U.transform[e]),d(e)&&(n=A(e,n,o.$vm))}),n(r)}function A(e,t,n){return function(o){return e.call(n,o,t)}}function R(e,t,n){var o,r=ne(t),i=m(t);w(t,function(t,u){o=h(t)||ne(t),n&&(u=n+"["+(i||o?u:"")+"]"),!n&&r?e.add(t.name,t.value):o?R(e,t,u):e.add(u,t)})}function F(e){var t=e.match(/^\[|^\{(?!\{)/),n={"[":/]$/,"{":/}$/};return t&&n[t[0]].test(e)}function k(e,t){t((e.client||(ee?ye:ge))(e))}function q(e,t){return Object.keys(e).reduce(function(e,n){return f(t)===f(n)?n:e},null)}function D(e){if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return a(e)}function V(e){return new r(function(t){var n=new FileReader;n.readAsText(e),n.onload=function(){t(n.result)}})}function H(e){return 0===e.type.indexOf("text")||-1!==e.type.indexOf("json")}function M(e){var t=this||{},n=be(t.$vm);return I(e||{},t.$options,M.options),M.interceptors.forEach(function(e){p(e)&&(e=M.interceptor[e]),d(e)&&n.use(e)}),n(new Ie(e)).then(function(e){return e.ok?e:r.reject(e)},function(e){return e instanceof Error&&u(e),r.reject(e)})}function N(e,t,n,o){var r=this||{},i={};return n=oe({},N.actions,n),w(n,function(n,u){n=x({url:e,params:oe({},t)},o,n),i[u]=function(){return(r.$http||M)(B(n,arguments))}}),i}function B(e,t){var n,o=oe({},e),r={};switch(t.length){case 2:r=t[0],n=t[1];break;case 1:/^(POST|PUT|PATCH)$/i.test(o.method)?n=t[0]:r=t[0];break;case 0:break;default:throw"Expected up to 2 arguments [params, body], got "+t.length+" arguments"}return o.body=n,o.params=oe({},o.params,r),o}function Q(e){Q.installed||(te(e),e.url=U,e.http=M,e.resource=N,e.Promise=r,Object.defineProperties(e.prototype,{$url:{get:function(){return b(e.url,this,this.$options.url)}},$http:{get:function(){return b(e.http,this,this.$options.http)}},$resource:{get:function(){return e.resource.bind(this)}},$promise:{get:function(){var t=this;return function(n){return new e.Promise(n,t)}}}}))}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Url",function(){return U}),n.d(t,"Http",function(){return M}),n.d(t,"Resource",function(){return N});/*!
 * vue-resource v1.3.4
 * https://github.com/pagekit/vue-resource
 * Released under the MIT License.
 */
var W=2;o.reject=function(e){return new o(function(t,n){n(e)})},o.resolve=function(e){return new o(function(t,n){t(e)})},o.all=function(e){return new o(function(t,n){var r=0,i=[];0===e.length&&t(i);for(var u=0;u<e.length;u+=1)o.resolve(e[u]).then(function(n){return function(o){i[n]=o,(r+=1)===e.length&&t(i)}}(u),n)})},o.race=function(e){return new o(function(t,n){for(var r=0;r<e.length;r+=1)o.resolve(e[r]).then(t,n)})};var J=o.prototype;J.resolve=function(e){var t=this;if(t.state===W){if(e===t)throw new TypeError("Promise settled with itself.");var n=!1;try{var o=e&&e.then;if(null!==e&&"object"==typeof e&&"function"==typeof o)return void o.call(e,function(e){n||t.resolve(e),n=!0},function(e){n||t.reject(e),n=!0})}catch(e){return void(n||t.reject(e))}t.state=0,t.value=e,t.notify()}},J.reject=function(e){var t=this;if(t.state===W){if(e===t)throw new TypeError("Promise settled with itself.");t.state=1,t.value=e,t.notify()}},J.notify=function(){var e=this;s(function(){if(e.state!==W)for(;e.deferred.length;){var t=e.deferred.shift(),n=t[0],o=t[1],r=t[2],i=t[3];try{0===e.state?r("function"==typeof n?n.call(void 0,e.value):e.value):1===e.state&&("function"==typeof o?r(o.call(void 0,e.value)):i(e.value))}catch(e){i(e)}}})},J.then=function(e,t){var n=this;return new o(function(o,r){n.deferred.push([e,t,o,r]),n.notify()})},J.catch=function(e){return this.then(void 0,e)},"undefined"==typeof Promise&&(window.Promise=o),r.all=function(e,t){return new r(Promise.all(e),t)},r.resolve=function(e,t){return new r(Promise.resolve(e),t)},r.reject=function(e,t){return new r(Promise.reject(e),t)},r.race=function(e,t){return new r(Promise.race(e),t)};var X=r.prototype;X.bind=function(e){return this.context=e,this},X.then=function(e,t){return e&&e.bind&&this.context&&(e=e.bind(this.context)),t&&t.bind&&this.context&&(t=t.bind(this.context)),new r(this.promise.then(e,t),this.context)},X.catch=function(e){return e&&e.bind&&this.context&&(e=e.bind(this.context)),new r(this.promise.catch(e),this.context)},X.finally=function(e){return this.then(function(t){return e.call(this),t},function(t){return e.call(this),Promise.reject(t)})};var _,G={},z=G.hasOwnProperty,K=[],Y=K.slice,Z=!1,ee="undefined"!=typeof window,te=function(e){var t=e.config,n=e.nextTick;_=n,Z=t.debug||!t.silent},ne=Array.isArray,oe=Object.assign||T,re=function(e,t){var n=t(e);return p(e.root)&&!/^(https?:)?\//.test(n)&&(n=c(e.root,"/")+"/"+n),n},ie=function(e,t){var n=Object.keys(U.options.params),o={},r=t(e);return w(e.params,function(e,t){-1===n.indexOf(t)&&(o[t]=e)}),o=U.params(o),o&&(r+=(-1==r.indexOf("?")?"?":"&")+o),r},ue=function(e){var t=[],n=j(e.url,e.params,t);return t.forEach(function(t){delete e.params[t]}),n};U.options={url:"",root:null,params:{}},U.transform={template:ue,query:ie,root:re},U.transforms=["template","query","root"],U.params=function(e){var t=[],n=encodeURIComponent;return t.add=function(e,t){d(t)&&(t=t()),null===t&&(t=""),this.push(n(e)+"="+n(t))},R(t,e),t.join("&").replace(/%20/g,"+")},U.parse=function(e){var t=document.createElement("a");return document.documentMode&&(t.href=e,e=t.href),t.href=e,{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",port:t.port,host:t.host,hostname:t.hostname,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):""}};var se=function(e){return new r(function(t){var n=new XDomainRequest,o=function(o){var r=o.type,i=0;"load"===r?i=200:"error"===r&&(i=500),t(e.respondWith(n.responseText,{status:i}))};e.abort=function(){return n.abort()},n.open(e.method,e.getUrl()),e.timeout&&(n.timeout=e.timeout),n.onload=o,n.onabort=o,n.onerror=o,n.ontimeout=o,n.onprogress=function(){},n.send(e.getBody())})},ae=ee&&"withCredentials"in new XMLHttpRequest,ce=function(e,t){if(ee){var n=U.parse(location.href),o=U.parse(e.getUrl());o.protocol===n.protocol&&o.host===n.host||(e.crossOrigin=!0,e.emulateHTTP=!1,ae||(e.client=se))}t()},fe=function(e,t){y(e.body)?e.headers.delete("Content-Type"):h(e.body)&&e.emulateJSON&&(e.body=U.params(e.body),e.headers.set("Content-Type","application/x-www-form-urlencoded")),t()},le=function(e,t){var n=e.headers.get("Content-Type")||"";h(e.body)&&0===n.indexOf("application/json")&&(e.body=JSON.stringify(e.body)),t(function(e){return e.bodyText?g(e.text(),function(t){if(n=e.headers.get("Content-Type")||"",0===n.indexOf("application/json")||F(t))try{e.body=JSON.parse(t)}catch(t){e.body=null}else e.body=t;return e}):e})},pe=function(e){return new r(function(t){var n,o,r=e.jsonp||"callback",i=e.jsonpCallback||"_jsonp"+Math.random().toString(36).substr(2),u=null;n=function(n){var r=n.type,s=0;"load"===r&&null!==u?s=200:"error"===r&&(s=500),s&&window[i]&&(delete window[i],document.body.removeChild(o)),t(e.respondWith(u,{status:s}))},window[i]=function(e){u=JSON.stringify(e)},e.abort=function(){n({type:"abort"})},e.params[r]=i,e.timeout&&setTimeout(e.abort,e.timeout),o=document.createElement("script"),o.src=e.getUrl(),o.type="text/javascript",o.async=!0,o.onload=n,o.onerror=n,document.body.appendChild(o)})},de=function(e,t){"JSONP"==e.method&&(e.client=pe),t()},he=function(e,t){d(e.before)&&e.before.call(this,e),t()},me=function(e,t){e.emulateHTTP&&/^(PUT|PATCH|DELETE)$/i.test(e.method)&&(e.headers.set("X-HTTP-Method-Override",e.method),e.method="POST"),t()},ve=function(e,t){w(oe({},M.headers.common,e.crossOrigin?{}:M.headers.custom,M.headers[f(e.method)]),function(t,n){e.headers.has(n)||e.headers.set(n,t)}),t()},ye=function(e){return new r(function(t){var n=new XMLHttpRequest,o=function(o){var r=e.respondWith("response"in n?n.response:n.responseText,{status:1223===n.status?204:n.status,statusText:1223===n.status?"No Content":a(n.statusText)});w(a(n.getAllResponseHeaders()).split("\n"),function(e){r.headers.append(e.slice(0,e.indexOf(":")),e.slice(e.indexOf(":")+1))}),t(r)};e.abort=function(){return n.abort()},e.progress&&("GET"===e.method?n.addEventListener("progress",e.progress):/^(POST|PUT)$/i.test(e.method)&&n.upload.addEventListener("progress",e.progress)),n.open(e.method,e.getUrl(),!0),e.timeout&&(n.timeout=e.timeout),e.responseType&&"responseType"in n&&(n.responseType=e.responseType),(e.withCredentials||e.credentials)&&(n.withCredentials=!0),e.crossOrigin||e.headers.set("X-Requested-With","XMLHttpRequest"),e.headers.forEach(function(e,t){n.setRequestHeader(t,e)}),n.onload=o,n.onabort=o,n.onerror=o,n.ontimeout=o,n.send(e.getBody())})},ge=function(e){var t=n(3);return new r(function(n){var o,r=e.getUrl(),i=e.getBody(),u=e.method,s={};e.headers.forEach(function(e,t){s[t]=e}),t(r,{body:i,method:u,headers:s}).then(o=function(t){var o=e.respondWith(t.body,{status:t.statusCode,statusText:a(t.statusMessage)});w(t.headers,function(e,t){o.headers.set(t,e)}),n(o)},function(e){return o(e.response)})})},be=function(e){function t(t){return new r(function(r,s){function a(){n=o.pop(),d(n)?n.call(e,t,c):(i("Invalid interceptor of type "+typeof n+", must be a function"),c())}function c(t){if(d(t))u.unshift(t);else if(h(t))return u.forEach(function(n){t=g(t,function(t){return n.call(e,t)||t},s)}),void g(t,r,s);a()}a()},e)}var n,o=[k],u=[];return h(e)||(e=null),t.use=function(e){o.push(e)},t},we=function(e){var t=this;this.map={},w(e,function(e,n){return t.append(n,e)})};we.prototype.has=function(e){return null!==q(this.map,e)},we.prototype.get=function(e){var t=this.map[q(this.map,e)];return t?t.join():null},we.prototype.getAll=function(e){return this.map[q(this.map,e)]||[]},we.prototype.set=function(e,t){this.map[D(q(this.map,e)||e)]=[a(t)]},we.prototype.append=function(e,t){var n=this.map[q(this.map,e)];n?n.push(a(t)):this.set(e,t)},we.prototype.delete=function(e){delete this.map[q(this.map,e)]},we.prototype.deleteAll=function(){this.map={}},we.prototype.forEach=function(e,t){var n=this;w(this.map,function(o,r){w(o,function(o){return e.call(t,o,r,n)})})};var xe=function(e,t){var n=t.url,o=t.headers,r=t.status,i=t.statusText;this.url=n,this.ok=r>=200&&r<300,this.status=r||0,this.statusText=i||"",this.headers=new we(o),this.body=e,p(e)?this.bodyText=e:v(e)&&(this.bodyBlob=e,H(e)&&(this.bodyText=V(e)))};xe.prototype.blob=function(){return g(this.bodyBlob)},xe.prototype.text=function(){return g(this.bodyText)},xe.prototype.json=function(){return g(this.text(),function(e){return JSON.parse(e)})},Object.defineProperty(xe.prototype,"data",{get:function(){return this.body},set:function(e){this.body=e}});var Ie=function(e){this.body=null,this.params={},oe(this,e,{method:l(e.method||"GET")}),this.headers instanceof we||(this.headers=new we(this.headers))};Ie.prototype.getUrl=function(){return U(this)},Ie.prototype.getBody=function(){return this.body},Ie.prototype.respondWith=function(e,t){return new xe(e,oe(t||{},{url:this.getUrl()}))};var Te={Accept:"application/json, text/plain, */*"},Pe={"Content-Type":"application/json;charset=utf-8"};M.options={},M.headers={put:Pe,post:Pe,patch:Pe,delete:Pe,common:Te,custom:{}},M.interceptor={before:he,method:me,jsonp:de,json:le,form:fe,header:ve,cors:ce},M.interceptors=["before","method","jsonp","json","form","header","cors"],["get","delete","head","jsonp"].forEach(function(e){M[e]=function(t,n){return this(oe(n||{},{url:t,method:e}))}}),["post","put","patch"].forEach(function(e){M[e]=function(t,n,o){return this(oe(o||{},{url:t,method:e,body:n}))}}),N.actions={get:{method:"GET"},save:{method:"POST"},query:{method:"GET"},update:{method:"PUT"},remove:{method:"DELETE"},delete:{method:"DELETE"}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(Q),t.default=Q},function(e,t){}]);