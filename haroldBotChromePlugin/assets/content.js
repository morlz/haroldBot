!function(e){function t(u){if(n[u])return n[u].exports;var i=n[u]={i:u,l:!1,exports:{}};return e[u].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:u})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([,function(e,t,n){"use strict";Vue.component("item",{template:"#item-tpl",props:["filename","index","add"]}),Vue.component("selectServerOption",{template:"#selectServerOption-tpl",props:["item"]});var u=new Vue({el:".mainWrapper",data:{UID:"not set",nowPlaying:"loading",onPause:!1,queue:[],playList:[],addCount:"",volume:10,playListSelectedCount:0,serverIp:"",selectedServerIp:"",onlineServers:[],port:2303},computed:{ip:{get:function(){return this.serverIp},set:function(e){this.serverIp!=e&&(chrome.storage.sync.set({serverIp:e}),this.serverIp=e)}},selectedServer:{get:function(){return this.selectedServerIp},set:function(e){this.selectedServerIp=e,this.ip=e,this.refreshAll()}}},methods:{clearUID:function(e){chrome.storage.sync.set({userId:""})},pause:function(e){l.emit("pauseStateChange",{userId:r,newState:!0}),console.log("paused",this)},resume:function(e){l.emit("pauseStateChange",{userId:r,newState:!1}),console.log("resumed")},skip:function(e){l.emit("skip",{userId:r})},add:function(e){l.emit("add",{userId:r,count:+this.addCount}),u.addCount=""},stop:function(){l.emit("stop",{userId:r})},defaultVolume:function(){this.volume=10,o.slider("value",10),l.emit("volumeChanged",{userId:r,newValue:10})},clearQueue:function(){l.emit("clearQueue",{userId:r})},removeFromQueue:function(e){l.emit("removeFromQueue",{userId:r,index:e})},removeFromPlayList:function(e){l.emit("removeFromPlayList",{userId:r,index:e})},addToQueueFromPlaylist:function(e){l.emit("addFromPlayListInQueue",{userId:r,index:e})},unselectSelected:function(e){$(".selectable .ui-selected").removeClass("ui-selected"),this.playListSelectedCount=0,this.playList.map(function(e){return e.selected=!1})},addSelectedFromPlaylistInQueue:function(){var e=u.playList.map(function(e,t){if(e.selected)return t}).filter(function(e){return"number"==typeof e});e.length>2&&0==e[0]&&e.splice(0,1),l.emit("addSelectedFromPlaylistInQueue",{userId:r,ids:e})},removeSelectedFromPlayList:function(){var e=u.playList.map(function(e,t){if(e.selected)return t}).filter(function(e){return"number"==typeof e});e.length>2&&0==e[0]&&e.splice(0,1),l.emit("removeSelectedFromPlayList",{userId:r,ids:e})},refreshAll:function(){if(this.ip){var e="http://"+this.ip+":"+this.port+"/";l&&l.disconnect(),l=io(e),i(l),l.emit("getAll",{userId:u.UID})}}}}),i=function(e){e.on("all",function(e){var t=e.users.filter(function(e){return e.id==r})[0];u.nowPlaying=e.nowPlaying.fileName,u.playList=t.playList,u.onPause=e.onPause,u.queue=t.queue,u.volume=e.volume,o.slider("value",e.volume)}),e.on("queueChange",function(e){u.queue=e}),e.on("nowPlayingChange",function(e){u.nowPlaying=e.fileName}),e.on("playListChange",function(e){u.playList=e}),e.on("pauseStateChange",function(e){u.onPause=e}),e.on("getUID",function(t){e.emit("UID",r)}),e.on("volumeChange",function(e){o.slider("value",+e),u.volume=+e})};chrome.storage.onChanged.addListener(function(e,t){e.userId&&(u.UID=e.userId.newValue,r=e.userId.newValue)});var r,o,s,l;$(function(){o=$("#volumeSlider").slider({value:u.volume,min:0,max:100,step:1,slide:function(e,t){u.volume=t.value,s&&clearTimeout(s),s=setTimeout(function(){l.emit("volumeChanged",{userId:r,newValue:t.value})},100)}}),$(".selectable").selectable({selected:function(e,t){u.playList[$(t.selected).index()].selected=!0,u.playListSelectedCount++},unselected:function(e,t){u.playList[$(t.unselected).index()].selected=!1,u.playListSelectedCount--}}),chrome.storage.sync.get(["userId","serverIp"],function(e){u.UID=e.userId,u.ip=e.serverIp,r=e.userId,u.refreshAll()});var e=function(){$.get("http://pew-pc.com/harold/index.php",function(e){u.onlineServers=JSON.parse(e)})};e(),setInterval(e,1e4)})}]);