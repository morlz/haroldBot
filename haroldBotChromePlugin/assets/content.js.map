{"version":3,"sources":["webpack:///webpack/bootstrap 6d43996dcaea12609a17","webpack:///./content.js"],"names":["Vue","component","template","props","main","el","data","nowPlaying","onPause","queue","playList","addCount","volume","playListSelectedCount","serverIp","selectedServerIp","onlineServers","port","computed","ip","get","set","newIp","chrome","storage","sync","selectedServer","newValue","refreshAll","methods","clearUID","e","pause","socket","emit","userId","UID","newState","console","log","resume","skip","add","count","stop","defaultVolume","volumeSlider","slider","clearQueue","removeFromQueue","index","removeFromPlayList","addToQueueFromPlaylist","unselectSelected","$","removeClass","map","selected","addSelectedFromPlaylistInQueue","selectedIDS","id","filter","length","splice","ids","removeSelectedFromPlayList","addr","disconnect","io","addSocketEvents","on","thisUser","cache","users","user","fileName","onChanged","addListener","area","sliderDataSendTimeout","value","min","max","step","slide","ui","clearTimeout","setTimeout","selectable","item","unselected","refreshOnlineServers","JSON","parse","setInterval"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6d43996dcaea12609a17","'use strict'\r\n\r\nVue.component('item', {\r\n    template: `#item-tpl`,\r\n    props: ['filename', 'index', 'add']\r\n})\r\n\r\nVue.component('selectServerOption', {\r\n    template: `#selectServerOption-tpl`,\r\n    props: ['item']\r\n})\r\n\r\nvar main = new Vue({\r\n    el: '.mainWrapper',\r\n    data: {\r\n        'UID': \"not set\",\r\n        nowPlaying: \"loading\",\r\n        onPause: false,\r\n        queue: [],\r\n        playList: [],\r\n        addCount: \"\",\r\n        volume: 10,\r\n\t\tplayListSelectedCount: 0,\r\n\t\tserverIp: \"\",\r\n\t\tselectedServerIp: \"\",\r\n\t\tonlineServers: [],\r\n\t\tport: 2303\r\n    },\r\n\tcomputed: {\r\n\t\tip: {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.serverIp;\r\n\t\t\t},\r\n\t\t\tset: function (newIp) {\r\n\t\t\t\tif (this.serverIp == newIp) return\r\n\t\t\t\tchrome.storage.sync.set({\r\n\t\t\t\t\t'serverIp': newIp\r\n\t\t\t\t})\r\n\t\t\t\tthis.serverIp = newIp;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectedServer: {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.selectedServerIp\r\n\t\t\t},\r\n\t\t\tset: function (newValue) {\r\n\t\t\t\tthis.selectedServerIp = newValue\r\n\t\t\t\tthis.ip = newValue\r\n\t\t\t\tthis.refreshAll()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n    methods: {\r\n        clearUID: function(e) {\r\n            chrome.storage.sync.set({\r\n                'userId': ''\r\n            })\r\n        },\r\n        pause: function(e) {\r\n            socket.emit(\"pauseStateChange\", {\r\n                userId: UID,\r\n                newState: true\r\n            })\r\n            console.log(\"paused\", this);\r\n        },\r\n        resume: function(e) {\r\n            socket.emit(\"pauseStateChange\", {\r\n                userId: UID,\r\n                newState: false\r\n            })\r\n            console.log(\"resumed\");\r\n        },\r\n        skip: function(e) {\r\n            socket.emit(\"skip\", {\r\n                userId: UID\r\n            })\r\n        },\r\n        add: function(e) {\r\n            socket.emit(\"add\", {\r\n                userId: UID,\r\n                count: +this.addCount\r\n            })\r\n\t\t\tmain.addCount = \"\"\r\n        },\r\n        stop: function() {\r\n            socket.emit(\"stop\", {\r\n                userId: UID\r\n            })\r\n        },\r\n        defaultVolume: function() {\r\n            this.volume = 10\r\n            volumeSlider.slider(\"value\", 10)\r\n            socket.emit(\"volumeChanged\", {\r\n                userId: UID,\r\n                newValue: 10\r\n            })\r\n        },\r\n        clearQueue: function() {\r\n            socket.emit(\"clearQueue\", {\r\n                userId: UID\r\n            })\r\n        },\r\n        removeFromQueue: function(index) {\r\n            socket.emit(\"removeFromQueue\", {\r\n                userId: UID,\r\n                index: index\r\n            })\r\n        },\r\n\t\tremoveFromPlayList: function (index) {\r\n\t\t\tsocket.emit(\"removeFromPlayList\", {\r\n                userId: UID,\r\n                index: index\r\n            })\r\n\t\t},\r\n\t\taddToQueueFromPlaylist: function (index) {\r\n\t\t\tsocket.emit(\"addFromPlayListInQueue\", {\r\n                userId: UID,\r\n                index: index\r\n            })\r\n\t\t},\r\n\t\tunselectSelected: function (e) {\r\n\t\t\t$(\".selectable .ui-selected\").removeClass(\"ui-selected\")\r\n\t\t\tthis.playListSelectedCount = 0\r\n\t\t\tthis.playList.map(el => el.selected = false)\r\n\t\t},\r\n\t\taddSelectedFromPlaylistInQueue: function () {\r\n\t\t\tlet selectedIDS = main.playList\r\n\t\t\t\t.map((el, id) => {\r\n\t\t\t\t\tif (el.selected) return id\r\n\t\t\t\t})\r\n\t\t\t\t.filter(el => typeof el == 'number')\r\n\r\n\t\t\tif (selectedIDS.length > 2 && selectedIDS[0] == 0) selectedIDS.splice(0, 1)\r\n\r\n\t\t\tsocket.emit(\"addSelectedFromPlaylistInQueue\", {\r\n                userId: UID,\r\n                ids: selectedIDS\r\n            })\r\n\r\n\t\t},\r\n\t\tremoveSelectedFromPlayList: function () {\r\n\t\t\tlet selectedIDS = main.playList\r\n\t\t\t\t.map((el, id) => {\r\n\t\t\t\t\tif (el.selected) return id\r\n\t\t\t\t})\r\n\t\t\t\t.filter(el => typeof el == 'number')\r\n\t\t\tif (selectedIDS.length > 2 && selectedIDS[0] == 0) selectedIDS.splice(0, 1)\r\n\r\n\t\t\tsocket.emit(\"removeSelectedFromPlayList\", {\r\n                userId: UID,\r\n                ids: selectedIDS\r\n            })\r\n\t\t},\r\n\t\trefreshAll: function () {\r\n\t\t\tif (!this.ip) return\r\n\t\t\tlet addr = `http://${this.ip}:${this.port}/`\r\n\r\n\t\t\tif (socket) {\r\n\t\t\t\tsocket.disconnect()\r\n\t\t\t}\r\n\r\n\t\t\tsocket = io(addr)\r\n\t\t\taddSocketEvents(socket)\r\n\t\t\tsocket.emit(\"getAll\", {\r\n\t\t\t\tuserId: main.UID\r\n\t\t\t})\r\n\t\t}\r\n    }\r\n})\r\n\r\n\r\n// ###  events  ###\r\n\r\nvar addSocketEvents = (socket) => {\r\n\tsocket.on(\"all\", cache => {\r\n\t    let thisUser = cache.users.filter(user => user.id == UID)[0]\r\n\t    main.nowPlaying = cache.nowPlaying.fileName\r\n\t    main.playList = thisUser.playList\r\n\t    main.onPause = cache.onPause\r\n\t    main.queue = thisUser.queue\r\n\t    main.volume = cache.volume\r\n\t    volumeSlider.slider(\"value\", cache.volume)\r\n\t})\r\n\r\n\tsocket.on(\"queueChange\", data => {\r\n\t    main.queue = data\r\n\t})\r\n\r\n\tsocket.on(\"nowPlayingChange\", data => {\r\n\t    main.nowPlaying = data.fileName\r\n\t})\r\n\r\n\tsocket.on(\"playListChange\", data => {\r\n\t    main.playList = data\r\n\t})\r\n\r\n\tsocket.on(\"pauseStateChange\", data => {\r\n\t    main.onPause = data\r\n\t})\r\n\r\n\tsocket.on(\"getUID\", data => {\r\n\t    socket.emit(\"UID\", UID)\r\n\t})\r\n\r\n\tsocket.on(\"volumeChange\", data => {\r\n\t    volumeSlider.slider(\"value\", +data)\r\n\t    main.volume = +data\r\n\t})\r\n\r\n}\r\n\r\nchrome.storage.onChanged.addListener((data, area) => {\r\n\tif (!data.userId) return\r\n    main.UID = data.userId.newValue\r\n    UID = data.userId.newValue\r\n})\r\n\r\n// ###  init  ###\r\n\r\nvar UID, volumeSlider, sliderDataSendTimeout, socket;\r\n\r\n$(function() {\r\n    volumeSlider = $('#volumeSlider').slider({\r\n        value: main.volume,\r\n        min: 0,\r\n        max: 100,\r\n        step: 1,\r\n        slide: function(e, ui) {\r\n            main.volume = ui.value\r\n\t\t\tif (sliderDataSendTimeout) clearTimeout(sliderDataSendTimeout)\r\n\t\t\tsliderDataSendTimeout = setTimeout(() => {\r\n\t\t\t\tsocket.emit(\"volumeChanged\", {\r\n\t\t\t\t\tuserId: UID,\r\n\t\t\t\t\tnewValue: ui.value\r\n\t\t\t\t})\r\n\t\t\t}, 100)\r\n        }\r\n    })\r\n\r\n\t$(\".selectable\").selectable({\r\n\t\tselected: function (e, ui) {\r\n\t\t\tlet item = main.playList[$(ui.selected).index()]\r\n\t\t\tif (!item.selected) {\r\n\t\t\t\titem.selected = true\r\n\t\t\t\tmain.playListSelectedCount++\r\n\t\t\t}\r\n\t\t},\r\n\t\tunselected: function (e, ui) {\r\n\t\t\tlet item = main.playList[$(ui.selected).index()]\r\n\t\t\tif (item.selected) {\r\n\t\t\t\titem.selected = false\r\n\t\t\t\tmain.playListSelectedCount--\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\r\n    chrome.storage.sync.get([\"userId\", \"serverIp\"], (data) => {\r\n        main.UID = data.userId\r\n\t\tmain.ip = data.serverIp\r\n\t\tUID = data.userId\r\n\r\n\t\tmain.refreshAll()\r\n    })\r\n\r\n\tvar refreshOnlineServers = () => {\r\n\t\t$.get(\"http://pew-pc.com/harold/index.php\", data => {\r\n\t\t\tmain.onlineServers = JSON.parse( data )\r\n\t\t})\r\n\t}\r\n\r\n\trefreshOnlineServers()\r\n\tsetInterval(refreshOnlineServers, 10000)\r\n\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./content.js"],"sourceRoot":""}